<phoc:param name="Articles" />
<phoc:param name="PageId" />
<phoc:param name="LastPageId" />
<phoc:param name="ACP" />

<phoc:include file="header.html" />

<h3>Ecrire un Nouvel Article</h3>
<form id="article-form" method="post" action="{phoc:base-url}/_service/write">
    <div class="form-group">
        <label for="title-input">Titre</label>
        <input id="title-input" type="text" name="title" class="form-control" required />
    </div>
    <div class="form-group">
        <label for="body-input"><strong>Message</strong></label><br />
        <textarea id="body-input" name="body" form="article-form" class="form-control" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Poster</button>
</form>

<hr />

<h3>Anciens Articles</h3>
<phoc:for each="$Articles" as="$article">
    <div>
        <h4>
            <phoc:!-- any PHP expression is valid inside PHOC attributes --/>
            <phoc:def url="\preg_replace('/\s/', '-', $article->Title) . '.' . $article->Id"/>
            <a href="{phoc:base-url}/article/{phoc:out var='$url'}">
                <phoc:out var="$article->Title" />
            </a>
        </h4>
        <small><phoc:out var="$article->Date" /></small>
        <p>
            <phoc:out var="$article->Abstract" />...<br />
            <a type="button" href="{phoc:base-url}/article/{phoc:out var='$url'}" class="btn btn-primary btn-sm active">Lire la suite</a>
        </p>
    </div>
</phoc:for>

<phoc:include file="nav.html" />

<phoc:include file="footer.html" />